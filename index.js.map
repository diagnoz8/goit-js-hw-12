{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/img/error.png","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst getImgs = async (userRequest, page) =>{\nconst res = await axios.get('https://pixabay.com/api/',{\n    params:\n            {\n            key: '49241808-b19f3ed80577ae196aabc5d53',\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            q: userRequest,\n            per_page: 15,\n            page: page,\n            }\n    })\n    \n            return res.data;\n\n}\n \n export default getImgs;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEZSURBVHgBrZVRDoMgDIar0fi6m2xH2Y3Ek2w3cFfZXXwBljFQCai0xemfoCaU/xNpKwAirXWrlDY5w8ViPhVmbgwIO14A3zeQKq/2IuwaqOu6A07+zaVUT8iUi+V28rd5NuSIOQs5wxyFUOZKqRtnmIpZQCZz3acWcgcXUjkF0b2bmwFSpAxskMAgYecaWSsFC8AgnHkMqIBR09TCGrnHsZic5iLs3By3ngWsITMgy9yphEyVJZjUM6esHUS9yfea7N7DAmJz/1niM2EhVBZR2UKl8DS/SFO80OhUnCBkoYWgz2MdNAx8q0jFOK/Fy1GQvdqYe50BQc3PgLDmRyCU+aYOfFsoCtPa+yXvp2/ue9rHqLATflCf5QflVUcNIrzeSwAAAABJRU5ErkJggg==\"","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst gallery = document.querySelector('.gallery');\nexport const loadMoreBtn = document.querySelector('.loadMore-btn');\nimport errorIcon from '../img/error.png'; \n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\nconst render =  ({hits, totalHits} )=>{\n  \n  const imgCollection = [];\n\n    hits.forEach(image => {\n        const {webformatURL, largeImageURL, tags, likes, views, comments, downloads} = image;\n        \n          imgCollection.push( `<li class=\"gallery-item\">\n         <a class=\"gallery-link\" href=\"${largeImageURL}\">\n           <img\n             class=\"gallery-image\"\n             src=\"${webformatURL}\"\n             alt=\"${tags}\"\n           />\n           <ul class=\"desc\">\n               <li class=\"descel\"><span class=\"bold\">Likes:</span> ${likes}</li>\n               <li class=\"descel\"><span class=\"bold\">Views:</span> ${views}</li>\n               <li class=\"descel\"><span class=\"bold\">Comments:</span> ${comments}</li>\n               <li class=\"descel\"><span class=\"bold\">Downloads:</span> ${downloads}</li>\n             </ul>\n         </a>\n       </li>`);\n       });\n       gallery.insertAdjacentHTML(\"beforeend\", imgCollection.join(\"\"));\n       lightbox.refresh();\nif (hits.length===15) {\n  loadMoreBtn.dataset.visible = \"true\";\n}\nelse if(totalHits <= 15){\n  loadMoreBtn.dataset.visible = \"false\";\n}\nelse{\n  iziToast.show({\n    title: 'ðŸ˜¢',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    color: '#a4ccb1',\n    titleColor: '#FFFFFF',\n    titleSize: '16px',\n    titleLineHeight: '24px',\n    messageColor: '#FFFFFF',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    iconUrl: errorIcon,\n    iconColor: '#FFFFFF',\n    theme: 'dark',\n    position: 'topRight',  \n    })\n    loadMoreBtn.dataset.visible = \"false\";\n\n}\n};\n\nexport { render, lightbox };\n","import iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport getImgs from'./js/pixabay-api'\nimport { render, lightbox, loadMoreBtn} from './js/render-functions'\nimport errorIcon from '../src/img/error.png'; \n\nconst searchForm = document.querySelector('.form');\nconst searchText = document.querySelector('[name=search-text]');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nloader.classList.remove(\"loader\");\n\nsearchForm.addEventListener('submit', async (evt)=>{\n    evt.preventDefault();\n    gallery.innerHTML =\"\"; \n    loader.classList.toggle(\"loader\");\n    loadMoreBtn.dataset.visible = \"false\";\n\n \n //                 -- por si no han teclado request --\n if (searchText.value.trim().length === 0) {\n    loader.classList.remove(\"loader\");\n    iziToast.show({\n        title: 'Error',\n        message: 'Please enter your request',\n        color: '#EF4040',\n        titleColor: '#FFFFFF',\n        titleSize: '16px',\n        titleLineHeight: '24px',\n        messageColor: '#FFFFFF',\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        iconUrl: errorIcon,\n        iconColor: '#FFFFFF',\n        theme: 'dark',\n        position: 'topRight', \n    });\nreturn\n }\n//\n//                       -- buscamos --\npage = 1;\n\ntry {\n    const { hits, totalHits } = await getImgs(searchText.value, page);\n    loader.classList.remove(\"loader\");\n        if (hits.length === 0) {\n        iziToast.show({\n        title: 'ðŸ˜¢',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        color: '#EF4040',\n        titleColor: '#FFFFFF',\n        titleSize: '16px',\n        titleLineHeight: '24px',\n        messageColor: '#FFFFFF',\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        iconUrl: errorIcon,\n        iconColor: '#FFFFFF',\n        theme: 'dark',\n        position: 'topRight', \n        })\n        return\n    }\n    render({ hits, totalHits });\n    lightbox.refresh();\n} catch (error) {\n    loader.classList.remove(\"loader\");\n    iziToast.show({\n        title: 'ðŸ˜¢',\n        message: error.message,\n        color: '#EF4040',\n        titleColor: '#FFFFFF',\n        titleSize: '16px',\n        titleLineHeight: '24px',\n        messageColor: '#FFFFFF',\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        iconUrl: errorIcon,\n        iconColor: '#FFFFFF',\n        theme: 'dark',\n        position: 'topRight',  \n        }); \n\n}  \n\n})\nlet page = 1;\n\nloadMoreBtn.addEventListener(\"click\", async (evt) => {\n    evt.preventDefault();\n\n    page++;\n   \ntry {\n    const { hits, totalHits } = await getImgs(searchText.value, page);\n    loader.classList.remove(\"loader\");\n        if (hits.length === 0) {\n        iziToast.show({\n        title: 'ðŸ˜¢',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        color: '#EF4040',\n        titleColor: '#FFFFFF',\n        titleSize: '16px',\n        titleLineHeight: '24px',\n        messageColor: '#FFFFFF',\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        iconUrl: errorIcon,\n        iconColor: '#FFFFFF',\n        theme: 'dark',\n        position: 'topRight', \n        })\n  \n        return\n        \n    }\n    await render({ hits, totalHits });\n\n  \n    lightbox.refresh();\n    const galleryItem = document.querySelector('.gallery-item');\n    const coord = galleryItem.getBoundingClientRect()\n    // console.log(coord);\nwindow.scrollBy({\n    top: -coord.y*2,\n   behavior: \"smooth\",\n  });\n} catch (error) {\n    loader.classList.remove(\"loader\");\n    iziToast.show({\n        title: 'ðŸ˜¢',\n        message: error.message,\n        color: '#EF4040',\n        titleColor: '#FFFFFF',\n        titleSize: '16px',\n        titleLineHeight: '24px',\n        messageColor: '#FFFFFF',\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        iconUrl: errorIcon,\n        iconColor: '#FFFFFF',\n        theme: 'dark',\n        position: 'topRight',  \n        }); \n        // console.log(error);\n        \n\n}  \n})\n"],"names":["getImgs","userRequest","page","axios","errorIcon","gallery","loadMoreBtn","lightbox","SimpleLightbox","render","hits","totalHits","imgCollection","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iziToast","searchForm","searchText","loader","evt","error","coord"],"mappings":"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"}